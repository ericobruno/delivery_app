<!DOCTYPE html>
<html>
<head>
    <title>Teste Hello Controller</title>
    <meta name="csrf-token" content="test-token">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Teste Hello Controller</h1>
        
        <div data-controller="hello">
            <p>Texto original</p>
        </div>
        
        <div data-controller="aceite-automatico" 
             data-aceite-automatico-status-value="false"
             data-aceite-automatico-url-value="/admin/toggle_aceite_automatico">
            
            <button data-aceite-automatico-target="button" 
                    data-action="click->aceite-automatico#toggle"
                    class="btn btn-primary">
                Teste Botão
            </button>
        </div>
        
        <div class="mt-3">
            <h3>Debug Info:</h3>
            <div id="debug"></div>
        </div>
    </div>
    
    <script>
        // Verificar se Stimulus está disponível
        console.log('Stimulus disponível:', typeof Stimulus !== 'undefined');
        console.log('Turbo disponível:', typeof Turbo !== 'undefined');
        
        // Adicionar debug info
        setTimeout(() => {
            const debug = document.getElementById('debug');
            debug.innerHTML = `
                <p><strong>Stimulus:</strong> ${typeof Stimulus !== 'undefined' ? '✅ Carregado' : '❌ Não carregado'}</p>
                <p><strong>Turbo:</strong> ${typeof Turbo !== 'undefined' ? '✅ Carregado' : '❌ Não carregado'}</p>
                <p><strong>Hello Controller:</strong> <span id="hello-status">Verificando...</span></p>
                <p><strong>Aceite Controller:</strong> <span id="aceite-status">Verificando...</span></p>
                <p><strong>Botão:</strong> <span id="button-status">Verificando...</span></p>
            `;
            
            const helloController = document.querySelector('[data-controller="hello"]');
            const aceiteController = document.querySelector('[data-controller="aceite-automatico"]');
            const button = document.querySelector('[data-aceite-automatico-target="button"]');
            
            document.getElementById('hello-status').textContent = 
                helloController ? '✅ Encontrado' : '❌ Não encontrado';
            
            document.getElementById('aceite-status').textContent = 
                aceiteController ? '✅ Encontrado' : '❌ Não encontrado';
            
            document.getElementById('button-status').textContent = 
                button ? '✅ Encontrado' : '❌ Não encontrado';
                
            if (helloController) {
                console.log('Hello Controller encontrado:', helloController);
            }
            
            if (aceiteController) {
                console.log('Aceite Controller encontrado:', aceiteController);
                console.log('Data attributes:', aceiteController.dataset);
            }
            
            if (button) {
                console.log('Botão encontrado:', button);
                console.log('Data action:', button.dataset.action);
            }
        }, 1000);
    </script>
    
    <!-- Carregar JavaScript do Rails -->
    <script src="http://localhost:3001/assets/application.js"></script>
</body>
</html>