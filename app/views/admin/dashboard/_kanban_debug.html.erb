<!-- Debug Panel para Kanban -->
<div class="alert alert-info mb-3">
  <h6>ğŸ”§ Debug Kanban System</h6>
  <div class="row">
    <div class="col-md-6">
      <small><strong>ğŸ“Š Dados:</strong></small>
      <ul class="mb-0 small">
        <li>Total de pedidos: <%= orders.count %></li>
        <li>Stimulus registrado: <span id="stimulus-status">â“</span></li>
        <li>Sortable.js carregado: <span id="sortable-status">â“</span></li>
        <li>Kanban controller: <span id="kanban-status">â“</span></li>
      </ul>
    </div>
    <div class="col-md-6">
      <small><strong>ğŸ® Testes:</strong></small>
      <div class="btn-group-vertical btn-group-sm w-100">
        <button class="btn btn-outline-primary btn-sm" onclick="testStimulus()">Testar Stimulus</button>
        <button class="btn btn-outline-secondary btn-sm" onclick="testSortable()">Testar Sortable.js</button>
        <button class="btn btn-outline-success btn-sm" onclick="testKanban()">Testar Kanban</button>
      </div>
    </div>
  </div>
</div>

<script>
// Debug functions
function testStimulus() {
  const status = document.getElementById('stimulus-status');
  if (window.Stimulus) {
    status.innerHTML = 'âœ… OK';
    status.className = 'text-success';
    console.log('âœ… Stimulus estÃ¡ disponÃ­vel:', window.Stimulus);
  } else {
    status.innerHTML = 'âŒ ERRO';
    status.className = 'text-danger';
    console.log('âŒ Stimulus nÃ£o encontrado');
  }
}

function testSortable() {
  const status = document.getElementById('sortable-status');
  
  // Testar import dinÃ¢mico
  import('sortablejs').then(Sortable => {
    status.innerHTML = 'âœ… OK';
    status.className = 'text-success';
    console.log('âœ… Sortable.js carregado:', Sortable);
  }).catch(error => {
    status.innerHTML = 'âŒ ERRO';
    status.className = 'text-danger';
    console.log('âŒ Erro ao carregar Sortable.js:', error);
  });
}

function testKanban() {
  const status = document.getElementById('kanban-status');
  const kanbanElement = document.querySelector('[data-controller="kanban"]');
  
  if (kanbanElement) {
    status.innerHTML = 'âœ… Elemento encontrado';
    status.className = 'text-success';
    console.log('âœ… Elemento Kanban encontrado:', kanbanElement);
    
    // Verificar se o controller estÃ¡ conectado
    const controllerInstance = kanbanElement.controller;
    if (controllerInstance) {
      console.log('âœ… Controller instance encontrada:', controllerInstance);
    } else {
      console.log('âš ï¸ Controller instance nÃ£o encontrada');
    }
  } else {
    status.innerHTML = 'âŒ Elemento nÃ£o encontrado';
    status.className = 'text-danger';
    console.log('âŒ Elemento [data-controller="kanban"] nÃ£o encontrado');
  }
}

// Auto-test on load
document.addEventListener('DOMContentLoaded', function() {
  setTimeout(() => {
    testStimulus();
    testSortable();
    testKanban();
  }, 1000);
});

// Log para debug
console.log('ğŸ”§ Debug Kanban carregado');
console.log('ğŸ“„ Document ready state:', document.readyState);
console.log('ğŸŒ Location:', window.location.href);
</script> 